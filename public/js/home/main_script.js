const Seoulurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EC%84%9C%EC%9A%B8&ver=1.0";
const Busanurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EB%B6%80%EC%82%B0&ver=1.0"
const Daeguurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EB%8C%80%EA%B5%AC&ver=1.0"
const Incheonurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EC%9D%B8%EC%B2%9C&ver=1.0"
const Gwangjuurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EA%B4%91%EC%A3%BC&ver=1.0"
const Daejeonurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EB%8C%80%EC%A0%84&ver=1.0"
const Ulsanurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EC%9A%B8%EC%82%B0&ver=1.0"
const Gyeonggiurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EA%B2%BD%EA%B8%B0&ver=1.0"
const Gangwonurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EA%B0%95%EC%9B%90&ver=1.0"
const Chungbukurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EC%B6%A9%EB%B6%81&ver=1.0"
const Chungnamurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EC%B6%A9%EB%82%A8&ver=1.0"
const Jeonbukurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EC%A0%84%EB%B6%81&ver=1.0"
const Jeonnamurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EC%A0%84%EB%82%A8&ver=1.0"
const Gyeongbukurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EA%B2%BD%EB%B6%81&ver=1.0"
const Gyeongnamurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EA%B2%BD%EB%82%A8&ver=1.0"
const Jejuurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EC%A0%9C%EC%A3%BC&ver=1.0"
const sejongurl = "https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getCtprvnRltmMesureDnsty?serviceKey=VLRChp1oR%2BEhpUBq2PAX%2FrEubZIdjeV03oECYaWYrrEtF1XAlKd9iba%2FcLlkprU0aSTNw%2FD5WZkHNUhBEacrXQ%3D%3D&returnType=json&numOfRows=1&pageNo=1&sidoName=%EC%84%B8%EC%A2%85&ver=1.0"
const density = document.querySelector(".local-fineDust-today-density");
const densityState = document.querySelector(".local-fineDust-today-state");

const api2 = async ()  => {
    let tatel = 0;
    await fetch(Seoulurl)
        .then(res => res.json())
        .then(res => {
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Busanurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Daeguurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Incheonurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Gwangjuurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Daejeonurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Ulsanurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Gyeonggiurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Gangwonurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Chungbukurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Chungnamurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Jeonbukurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Jeonnamurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Gyeongbukurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Gyeongnamurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(Jejuurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    await fetch(sejongurl)
        .then(res => res.json())
        .then(res => {
            
            if(res["response"]["body"]["items"][0]["pm10Value"] != "-" ){
                tatel += Number(res["response"]["body"]["items"][0]["pm10Value"])
            }
    })
    let atatel = Math.round(tatel / 17);
    density.innerHTML = `미세먼지 농도 : ${atatel} PM`
    if(atatel <= 15){
        densityState.innerHTML = `현재 미세먼지 상태 : 좋음`
    }else if (atatel > 16 && atatel <= 35){
        densityState.innerHTML = `현재 미세먼지 상태 : 보통`
    }else if (atatel > 36 && atatel <= 75){
        densityState.innerHTML = `현재 미세먼지 상태 : 나쁨`
    }else if (atatel >= 76){
        densityState.innerHTML = `현재 미세먼지 상태 : 매우나쁨`
    }
}
api2()